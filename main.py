from openai import AsyncOpenAI
import os
import asyncio 
import openai
openai.api_key = os.getenv("OPENAI_API_KEY")
import requests  

# üîß –°–±—Ä–æ—Å Telegram-—Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
import aiohttp

async def reset_telegram_session():
    token = os.getenv("TELEGRAM_BOT_TOKEN")
    base_url = f"https://api.telegram.org/bot{token}"

    async with aiohttp.ClientSession() as session:
        try:
            print("üîß –ó–∞–ø—Ä–æ—Å getUpdates (–æ—á–∏—Å—Ç–∫–∞ polling)...")
            async with session.get(f"{base_url}/getUpdates") as r1:
                print("üì© getUpdates:", await r1.json())

            print("üßπ –£–¥–∞–ª–µ–Ω–∏–µ Webhook...")
            async with session.get(f"{base_url}/deleteWebhook") as r2:
                print("üßº deleteWebhook:", await r2.json())

        except Exception as e:
            print("‚ö†Ô∏è –û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ Telegram-—Å–µ—Å—Å–∏–∏:", e)
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, ContextTypes, filters
from telegram.ext import ChatMemberHandler
from telegram import Update, InlineKeyboardMarkup, InlineKeyboardButton

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã
client = AsyncOpenAI(api_key=os.getenv("OPENAI_API_KEY"))
BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")
# –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–µ–∂–∏–º–∞ GPT
user_gpt_mode = {}

# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
greet_text = (
    "üåü *–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –í–µ–¥—å–º—ã –°–∞–Ω–¥—Ä—ã –∏ –≠–ª–∞–ô–∏\\!*\n"
    "üîÆ –ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å, –ø–æ–ª—É—á–∏—Ç—å —Å–æ–≤–µ—Ç –∏–ª–∏ –Ω–∞–π—Ç–∏ –º–∞–≥–∏—á–µ—Å–∫—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É\\.\n"
    "üåü –ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî —Ç—ã –º–æ–∂–µ—à—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—ã–∑–≤–∞—Ç—å /help –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –∑–¥–µ—Å—å\\.\n"
    "üïØ –ù–∞–ø–∏—à–∏, —á—Ç–æ —Ç–µ–±—è –≤–æ–ª–Ω—É–µ—Ç ‚Äî –∏ –º—ã –ø–æ–π–¥—ë–º –ø–æ –ø—É—Ç–∏ –≤–º–µ—Å—Ç–µ, –∏–ª–∏ –Ω–∞–ø–∏—à–∏ –≤ –ª–∏—á–∫—É /contact\\."
)

async def greet_new_member(update: Update, context: ContextTypes.DEFAULT_TYPE):
    try:
        new_members = update.chat_member.new_chat_members
        for member in new_members:
            if update.chat_member.old_chat_member.status in ["left", "kicked"] and \
               update.chat_member.new_chat_member.status == "member" and \
               not member.is_bot and member.username is not None:

                print(f"üë§ –ù–∞—Å—Ç–æ—è—â–∏–π —É—á–∞—Å—Ç–Ω–∏–∫: {member.full_name} ({member.username})")
                await context.bot.send_message(
                    chat_id=update.chat_member.chat.id,
                    text=greet_text,
                    parse_mode="MarkdownV2"
                )
    except Exception as e:
        print("‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞:", str(e))
        
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥ –ø–æ –∫–ª—é—á–∞–º
async def generic_response_command(update: Update, context: ContextTypes.DEFAULT_TYPE, command: str = None):
    user_id = update.effective_user.id
    if user_gpt_mode.get(user_id):
        await update.message.reply_text(
            "ü§ñ –°–µ–π—á–∞—Å —Ç—ã –≤ —Ä–µ–∂–∏–º–µ –¥–∏–∞–ª–æ–≥–∞ —Å –°–∞–Ω–¥—Ä–∞ & –≠–ª–∞–ô–∞\\. –ù–∞–ø–∏—à–∏ /exit, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∫–æ–º–∞–Ω–¥\\.",
            parse_mode="MarkdownV2"
        )
        return

    if command is None:
        command = update.message.text.strip("/")

    aliases = {
        "pastlife": "past_life",
        "dream": "dreams"
    }
    if command in aliases:
        command = aliases[command]
        
    if command == "contact":
        contact_message = r"""üì® –ù–∞–ø–∏—à–∏ –í–µ–¥—å–º–µ –°–∞–Ω–¥—Ä–µ:
üßø [WhatsApp: \+370 689 27160](https://wa.me/37068927160)
üßø [–õ–∏—á–Ω—ã–π Telegram](https://t.me/WitchSandra96)
üßø [–°–∞–π—Ç: world\-psychology\.com](https://world-psychology.com/magiya-i-psihologiya-dlya-cheloveka/misticheskij-kabinet-vedmy-sandry/)
‚ú¥Ô∏è –í—ã–±–∏—Ä–∞–π —Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ —Ç–µ–±–µ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ\. –Ø –æ—Ç–≤–µ—á–∞—é –ª–∏—á–Ω–æ\. –ò –∫–æ–≥–¥–∞ —Ç—ã –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤ ‚Äî —è —É—Å–ª—ã—à—É\."""
        await update.message.reply_text(contact_message, parse_mode="MarkdownV2", disable_web_page_preview=True)
        return
        
    if command in prompts:
        parse_mode = parse_modes.get(command, "MarkdownV2")  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é MarkdownV2
        await update.message.reply_text(
            prompts[command],
            parse_mode=parse_mode,
            disable_web_page_preview=True
        )
    else:
        await chatgpt_response(update, context)
        
# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ –∏ ChatGPT
async def chatgpt_response(update: Update, context: ContextTypes.DEFAULT_TYPE = None):
    user_text = update.message.text

# ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ —Å —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏
keyword_to_command = {
   "silent": [
        "–ø–æ–º–æ–ª—á—É", "–º–æ–ª—á–∏", "–Ω–µ –≥–æ–≤–æ—Ä–∏"
    ],
    "elaya": [
        "—ç–ª–∞—è", "elaia", "–¥—É—Ö —ç–ª–∞‚Äô–π–∞", "–≥–æ–ª–æ—Å —ç–ª–∞‚Äô–π–∏", "—Å–≤—è–∑—å —Å –≠–ª–∞‚Äô–ô–∞", "sandra elaya", "elaja"
    ],
    "witch": [
        "–≤–µ–¥—å–º–∞", "–∫–æ–ª–¥—É–Ω—å—è", "–º–∞–≥–∏–Ω—è", "—à–∞–º–∞–Ω–∫–∞", "–≤–æ–ª—à–µ–±–Ω–∏—Ü–∞", "—Ç–∞, —á—Ç–æ –≤–µ–¥–∞–µ—Ç", "–∂–µ–Ω—â–∏–Ω–∞ —Å–∏–ª—ã"
    ],
    "spell": [
        "–∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ", "—Ñ–æ—Ä–º—É–ª–∞", "–º–∞–≥–∏—è —Å–ª–æ–≤–∞", "–≤–æ–ª—à–µ–±—Å—Ç–≤–æ", "–º–∞–≥–∏—á–µ—Å–∫–∞—è —Ä–µ—á—å", "–º–æ–ª–∏—Ç–≤–∞", "–≤–∑—ã–≤–∞–Ω–∏–µ"
    ],
    "love": [
        "–ª—é–±–æ–≤—å", "–æ—Ç–Ω–æ—à–µ–Ω–∏—è", "–≤–ª—é–±–ª—ë–Ω–Ω–æ—Å—Ç—å", "—Å–µ—Ä–¥—Ü–µ", "—á—É–≤—Å—Ç–≤–∞", "–ª—é–±–∏–º—ã–π", "–ø–∞—Ä—Ç–Ω—ë—Ä", "–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –º—É–∂—á–∏–Ω–æ–π", "–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –∂–µ–Ω—â–∏–Ω–æ–π"
    ],
    "health": [
        "–∑–¥–æ—Ä–æ–≤—å–µ", "–±–æ–ª–µ–∑–Ω—å", "–∏—Å—Ü–µ–ª–µ–Ω–∏–µ", "–≤—ã–∑–¥–æ—Ä–æ–≤–ª–µ–Ω–∏–µ", "—ç–Ω–µ—Ä–≥–∏—è —Ç–µ–ª–∞", "—Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ", "–º–∞–≥–∏—è –∏—Å—Ü–µ–ª–µ–Ω–∏—è", "–ª–µ—á–∏—Ç—å", "–±–æ–ª—å"
    ],
    "destiny": [
        "—Å—É–¥—å–±–∞", "–ø—É—Ç—å", "–ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ", "–∫–∞—Ä–º–∞", "–∂–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—É—Ç—å", "–∂–∏–∑–Ω—å", "—á—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å", "–∫—É–¥–∞ –∏–¥—Ç–∏", "–ø–æ—á–µ–º—É —è –∑–¥–µ—Å—å"
    ],
    "family": [
        "—Å–µ–º—å—è", "–¥–µ—Ç–∏", "—Ä–æ–¥", "–æ—Ç–Ω–æ—à–µ–Ω–∏—è –≤ —Å–µ–º—å–µ", "–º–∞—Ç–µ—Ä–∏–Ω—Å—Ç–≤–æ", "–æ—Ç—Ü–æ–≤—Å—Ç–≤–æ", "–¥–æ–º", "—Ä–æ–¥–∏—Ç–µ–ª–∏", "—Å–µ–º–µ–π–Ω—ã–µ —Å–≤—è–∑–∏", "—Å–µ–º–µ–π–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã"
    ],
    "energy": [
        "—ç–Ω–µ—Ä–≥–∏—è", "—É–ø–∞–¥–æ–∫ —Å–∏–ª", "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ", "–ø–æ–¥–ø–∏—Ç–∫–∞", "–∏—Å—Ç–æ—â–µ–Ω–∏–µ", "–Ω–µ—Ç —Å–∏–ª", "—É—Ç–æ–º–ª–µ–Ω–∏–µ", "–º–∞–≥–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è", "–∏—Å—Ç–æ—á–Ω–∏–∫ —Å–∏–ª—ã"
    ],
    "fear": [
        "—Å—Ç—Ä–∞—Ö", "–ø–∞–Ω–∏–∫–∞", "–±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ", "—Ç—Ä–µ–≤–æ–≥–∞", "—É–∂–∞—Å", "–≤–æ–ª–Ω–µ–Ω–∏–µ", "–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å—Ç—Ä–∞—Ö", "—Ç—ë–º–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞", "–±–æ—é—Å—å", "–º–µ–Ω—è –ø—É–≥–∞–µ—Ç"
    ],
    "mirror": [
        "–∑–µ—Ä–∫–∞–ª–æ", "–∑–µ—Ä–∫–∞–ª–æ –¥—É—à–∏", "–æ—Ç—Ä–∞–∂–µ–Ω–∏–µ", "–±–æ—é—Å—å —Å–º–æ—Ç—Ä–µ—Ç—å", "–Ω–µ —Ö–æ—á—É –≤–∏–¥–µ—Ç—å", "–≤–∏–∂—É –≤ –∑–µ—Ä–∫–∞–ª–µ", "–±–æ—é—Å—å —É–≤–∏–¥–µ—Ç—å —Å–µ–±—è"
    ],
    "protection": [
        "–∑–∞—â–∏—Ç–∞", "–æ–±–µ—Ä–µ–≥", "–æ–≥—Ä–∞–¥–∏—Ç—å", "–∑–∞—â–∏—Ç–∏—Ç—å—Å—è", "–º–∞–≥–∏—á–µ—Å–∫–∏–π —â–∏—Ç", "—ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞", "—â–∏—Ç", "—Å–ø–∞—Å—Ç–∏—Å—å", "—É–∫—Ä—ã—Ç–∏–µ"
    ],
    "cleanse": [
        "–æ—á–∏—â–µ–Ω–∏–µ", "–æ—á–∏—Å—Ç–∫–∞", "–æ—á–∏—Å—Ç–∏—Ç—å", "–ø–æ—á–∏—Å—Ç–∏—Ç—å", "—Å–Ω—è—Ç—å –Ω–µ–≥–∞—Ç–∏–≤", "—ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∞—è —á–∏—Å—Ç–∫–∞", "–æ—á–∏—Å—Ç–∏—Ç—å –∞—É—Ä—É", "–æ—á–∏—Å—Ç–∏—Ç—å—Å—è", "—É–±—Ä–∞—Ç—å –ø–æ—Ä—á—É"
    ],
    "ritual": [
        "—Ä–∏—Ç—É–∞–ª", "–æ–±—Ä—è–¥", "–¥–µ–π—Å—Ç–≤–∏–µ", "–º–∞–≥–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ", "–∫–æ–ª–¥–æ–≤—Å—Ç–≤–æ", "–º–∞–≥–∏—è", "–ø—Ä–∏–≤–æ—Ä–æ—Ç", "–æ—Ç–≤–æ—Ä–æ—Ç", "–≤—ã–∑–æ–≤", "–∂–µ—Ä—Ç–≤–æ–ø—Ä–∏–Ω–æ—à–µ–Ω–∏–µ"
    ],
    "tarot": [
        "—Ç–∞—Ä–æ", "–∫–∞—Ä—Ç—ã", "–≥–∞–¥–∞–Ω–∏–µ", "—Ä–∞—Å–∫–ª–∞–¥", "–∞—Ä–∫–∞–Ω", "–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã", "–ø—Ä–æ—á—Ç–µ–Ω–∏–µ –∫–∞—Ä—Ç", "–≥–∞–¥–∞—Ç—å", "—Ç–∞—Ä–æ–ª–æ–≥", "—Ç–∞—Ä–æ —Ä–∞—Å–∫–ª–∞–¥"
    ],
    "rune": [
        "—Ä—É–Ω–∞", "—Ä—É–Ω—ã", "—Ä—É–Ω–Ω—ã–π", "—Ä—É–Ω–∏—á–µ—Å–∫–∏–π", "–∑–Ω–∞–∫", "—Å–∏–º–≤–æ–ª", "–¥—Ä–µ–≤–Ω–∏–π –∑–Ω–∞–∫", "—Ä—É–Ω–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞", "—Ä—É–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ"
    ],
    "lunar": [
        "–ª—É–Ω–∞", "–ª—É–Ω–Ω—ã–π", "—Ñ–∞–∑—ã –ª—É–Ω—ã", "–ª—É–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã", "–ø–æ–ª–Ω–∞—è –ª—É–Ω–∞", "–Ω–æ–≤–æ–ª—É–Ω–∏–µ", "—Ä–∞—Å—Ç—É—â–∞—è –ª—É–Ω–∞", "—É–±—ã–≤–∞—é—â–∞—è –ª—É–Ω–∞", "–ª—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å", "–ª—É–Ω–Ω—ã–π —Ä–∏—Ç—É–∞–ª"
    ],
    "divination": [
        "–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ", "–≤–∏–¥–µ–Ω–∏–µ", "–∑–Ω–∞–∫ —Å—É–¥—å–±—ã", "—É–∑–Ω–∞—Ç—å –±—É–¥—É—â–µ–µ", "—á—Ç–æ –±—É–¥–µ—Ç", "—è—Å–Ω–æ–≤–∏–¥–µ–Ω–∏–µ", "–ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–æ"
    ],
    "curse": [
        "–ø–æ—Ä—á–∞", "–ø—Ä–æ–∫–ª—è—Ç–∏–µ", "—Å–≥–ª–∞–∑", "–Ω–µ–≥–∞—Ç–∏–≤", "—á—ë—Ä–Ω–∞—è –º–∞–≥–∏—è", "–ø–æ—Ä—á–∞ –Ω–∞ —Å–µ–º—å—é", "–∑–∞–≤–∏—Å—Ç—å", "–¥—É—Ä–Ω–æ–π –≥–ª–∞–∑"
    ],
    "money": [
        "–¥–µ–Ω—å–≥–∏", "–±–æ–≥–∞—Ç—Å—Ç–≤–æ", "–∏–∑–æ–±–∏–ª–∏–µ", "—Ñ–∏–Ω–∞–Ω—Å—ã", "–ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –¥–µ–Ω–µ–≥", "—É–¥–∞—á–∞ –≤ –¥–µ–Ω—å–≥–∞—Ö", "–ø–æ—Ç–æ–∫ –∏–∑–æ–±–∏–ª–∏—è"
    ],
    "guides": [
        "–¥—É—Ö–æ–≤–Ω—ã–π –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫", "–ø—Ä–æ–≤–æ–¥–Ω–∏–∫", "–≤—ã—Å—à–∏–µ —Å–∏–ª—ã", "–¥—É—Ö –ø–æ–º–æ—â–Ω–∏–∫", "–ø–æ–∫—Ä–æ–≤–∏—Ç–µ–ª—å", "–¥—É—Ö", "—Å–∏–ª–∞ —Ä–æ–¥–∞", "—ç–≥—Ä–µ–≥–æ—Ä", "—Å—É—â–µ—Å—Ç–≤–æ —Å–≤–µ—Ç–∞", "—ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∞—è —Å—É—â–Ω–æ—Å—Ç—å"
    ],
    "dreams": [
        "—Å–æ–Ω", "—Å–Ω—ã", "–ø—Ä–∏—Å–Ω–∏–ª–æ—Å—å", "—Ç–æ–ª–∫–æ–≤–∞–Ω–∏–µ —Å–Ω–∞", "—á—Ç–æ –∑–Ω–∞—á–∏—Ç —Å–æ–Ω", "—Å–Ω—ã –ø—Ä–∏—Ö–æ–¥—è—Ç", "–æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–µ —Å–Ω—ã", "–Ω–æ—á–Ω–æ–µ –≤–∏–¥–µ–Ω–∏–µ", "—Å–Ω–æ–≤–∏–¥–µ–Ω–∏–µ"
    ],
    "karma": [
        "–∫–∞—Ä–º–∞", "—Ä–æ–¥–æ–≤–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞", "—Ä–æ–¥–æ–≤—ã–µ —É–∑–ª—ã", "—Ä–æ–¥–æ–≤–∞—è –º–∞–≥–∏—è", "–∏—Å–∫—É–ø–ª–µ–Ω–∏–µ", "–æ—à–∏–±–∫–∏ –ø—Ä–æ—à–ª–æ–≥–æ", "–∫–∞—Ä–º–∏—á–µ—Å–∫–∞—è –æ—Ç—Ä–∞–±–æ—Ç–∫–∞", "—Ä–æ–¥–æ–≤—ã–µ –≥—Ä–µ—Ö–∏"
    ],
    "death": [
        "—Å–º–µ—Ä—Ç—å", "—É–º–µ—Ä", "—É—à—ë–ª", "–º—ë—Ä—Ç–≤—ã–µ", "–º–∏—Ä –º—ë—Ä—Ç–≤—ã—Ö", "–ø–æ–∫–æ–π–Ω–∏–∫", "–ø—Ä–µ–¥–∫–∏", "–∂–∏–∑–Ω—å –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏", "–ø–µ—Ä–µ—Ö–æ–¥ –¥—É—à–∏", "–ø–æ–º–∏–Ω–∞–Ω–∏–µ"
    ],
    "time": [
        "–≤—Ä–µ–º—è", "–ø—Ä–æ—à–ª–æ–µ", "–Ω–∞—Å—Ç–æ—è—â–µ–µ", "–±—É–¥—É—â–µ–µ", "—Ü–∏–∫–ª", "–º–æ–º–µ–Ω—Ç", "–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ—Ä–æ—Ç–∞", "—Ç–æ—á–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞", "—Å—É–¥—å–±–æ–Ω–æ—Å–Ω—ã–π –º–æ–º–µ–Ω—Ç", "–≤—Ä–µ–º—è –ø–µ—Ä–µ–º–µ–Ω"
    ],
    "shadow": [
        "—Ç–µ–Ω—å", "—Ç—ë–º–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞", "–ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ", "–≤—ã—Ç–µ—Å–Ω–µ–Ω–Ω–æ–µ", "–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–µ–º–æ–Ω", "–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –±–æ–ª—å", "—Å–∫—Ä—ã—Ç—ã–µ —á—É–≤—Å—Ç–≤–∞", "—á—Ç–æ —è –ø—Ä—è—á—É", "—Ç—ë–º–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è"
    ],
    "truth": [
        "–∏—Å—Ç–∏–Ω–∞", "–ø—Ä–∞–≤–¥–∞", "–æ–±–º–∞–Ω", "–º–∞—Å–∫–∞", "—Ä–∞—Å–∫—Ä—ã—Ç–∏–µ", "–∏—Å—Ç–∏–Ω–Ω–æ–µ –ª–∏—Ü–æ", "—Ö–æ—á—É —É–∑–Ω–∞—Ç—å –ø—Ä–∞–≤–¥—É", "–≤—Å—ë –æ—Ç–∫—Ä–æ–µ—Ç—Å—è", "—Ä–∞—Å–∫—Ä—ã—Ç—å —Ç–∞–π–Ω—É"
    ],
    "past_life": [
        "–ø—Ä–æ—à–ª–∞—è –∂–∏–∑–Ω—å", "–ø—Ä–æ—à–ª—ã–µ –∂–∏–∑–Ω–∏", "—Ä–µ–∏–Ω–∫–∞—Ä–Ω–∞—Ü–∏—è", "–∂–∏–∑–Ω–∏ –¥—É—à–∏", "–≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥—É—à–∏", "–¥—É—à–µ–≤–Ω—ã–π –ø—É—Ç—å", "–≤–æ–ø–ª–æ—â–µ–Ω–∏–µ", "–∫–µ–º —è –±—ã–ª"
    ],
    "justice": [
        "—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å", "–≤–æ–∑–º–µ–∑–¥–∏–µ", "–≤–µ—Ä–Ω—É—Ç—å –¥–æ–ª–≥", "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å", "—á—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ", "–ø–æ—Ä—è–¥–æ–∫", "–Ω–∞–∫–∞–∑–∞–Ω–∏–µ", "–ø—Ä–∏—á–∏–Ω–∞ –±–æ–ª–∏"
    ],
    "earth": [
        "–∑–µ–º–ª—è", "–ø—Ä–∏—Ä–æ–¥–∞", "–∑–∞–∑–µ–º–ª–µ–Ω–∏–µ", "—Å–∏–ª–∞ –∑–µ–º–ª–∏", "—Ä–∞—Å—Ç–µ–Ω–∏—è", "–∫–æ—Ä–Ω–∏", "—Ç–µ–ª–µ—Å–Ω–æ—Å—Ç—å", "—Ç–µ–ª–æ", "–∑–µ–ª–µ–Ω–∞—è –º–∞–≥–∏—è", "–º–∞—Ç–µ—Ä–∏—è"
    ],
    "anger": [
        "–≥–Ω–µ–≤", "—è—Ä–æ—Å—Ç—å", "–∑–ª–æ—Å—Ç—å", "–∞–≥—Ä–µ—Å—Å–∏—è", "–∑–ª—é—Å—å", "—Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ", "–≤—Å–ø—ã–ª—å—á–∏–≤–æ—Å—Ç—å", "–±—É—Ä—è —ç–º–æ—Ü–∏–π", "–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≤—É–ª–∫–∞–Ω"
    ],
    "coldness": [
        "—Ö–æ–ª–æ–¥", "—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑–∞–º–æ—Ä–æ–∑–∫–∞", "–æ—Ç—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç—å", "–±–µ–∑–¥—É—à–∏–µ", "–∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞", "–Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "—Å—Ç—É–∂–∞ –≤ —Å–µ—Ä–¥—Ü–µ"
    ],
    "betrayal": [
        "–ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ", "–∏–∑–º–µ–Ω–∏–ª–∞", "–∏–∑–º–µ–Ω–∏–ª", "–º–µ–Ω—è –æ–±–º–∞–Ω—É–ª–∏", "—É—Ç—Ä–∞—Ç–∞ –¥–æ–≤–µ—Ä–∏—è", "–º–µ–Ω—è –ø—Ä–µ–¥–∞–ª–∏", "–ª–æ–∂—å", "–≤–µ—Ä–æ–ª–æ–º—Å—Ç–≤–æ"
    ],
    "confusion": [
        "–ø–æ—Ç–µ—Ä—è–Ω", "—Ä–∞—Å—Ç–µ—Ä—è–Ω", "–Ω–µ –ø–æ–Ω–∏–º–∞—é", "–∑–∞–ø—É—Ç–∞–ª—Å—è", "–∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å", "—Ö–∞–æ—Å", "—Å–±–∏–ª—Å—è —Å –ø—É—Ç–∏", "–Ω–µ—Ç —è—Å–Ω–æ—Å—Ç–∏", "—Ä–∞–∑–¥–≤–æ–µ–Ω–∏–µ"
    ],
    "guilt": [
        "–≤–∏–Ω–∞", "–≤–∏–Ω–æ–≤–∞—Ç", "—Å—Ç—ã–¥", "—Å–æ–∂–∞–ª–µ—é", "—è –≤–∏–Ω–æ–≤–µ–Ω", "–Ω–∞–∫–∞–∑–∞–Ω–∏–µ —Å–µ–±—è", "—è –ø–ª–æ—Ö–æ–π", "–Ω–µ –º–æ–≥—É –ø—Ä–æ—Å—Ç–∏—Ç—å —Å–µ–±—è"
    ],
    "faith": [
        "–≤–µ—Ä–∞", "–Ω–µ –≤–µ—Ä—é", "–ø–æ—Ç–µ—Ä—è –≤–µ—Ä—ã", "–¥—É—Ö–æ–≤–Ω—ã–π –∫—Ä–∏–∑–∏—Å", "—Å–æ–º–Ω–µ–Ω–∏–µ", "—è —É—Ç—Ä–∞—Ç–∏–ª –≤–µ—Ä—É", "–Ω–µ —á—É–≤—Å—Ç–≤—É—é –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è", "–≥–¥–µ –±–æ–≥", "–≤–æ —á—Ç–æ –≤–µ—Ä–∏—Ç—å"
    ],
    "childhood": [
        "–¥–µ—Ç—Å—Ç–≤–æ", "–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ä–µ–±—ë–Ω–æ–∫", "—Ç—Ä–∞–≤–º—ã –¥–µ—Ç—Å—Ç–≤–∞", "–æ–±–∏–¥—ã –∏–∑ –¥–µ—Ç—Å—Ç–≤–∞", "—Ä–æ–¥–∏—Ç–µ–ª–∏", "–º–∞–º–∞", "–ø–∞–ø–∞", "—Ä–∞–Ω–µ–Ω—ã–π —Ä–µ–±—ë–Ω–æ–∫", "–¥–µ—Ç—Å–∫–∞—è –±–æ–ª—å"
    ],
    "identity": [
        "–∫—Ç–æ —è", "–Ω–µ –∑–Ω–∞—é —Å–µ–±—è", "–ø–æ—Ç–µ—Ä—è–ª —Å–µ–±—è", "–Ω–µ –ø–æ–Ω–∏–º–∞—é –∫—Ç–æ —è", "–ª–∏—á–Ω–æ—Å—Ç—å", "—è –∏—Å—á–µ–∑", "—Ä–∞–∑–º—ã—Ç–æ–µ —è", "–Ω–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏"
    ],
    "donation": [
        "–ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å", "–ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å", "–ø–æ–º–æ—á—å –ø—Ä–æ–µ–∫—Ç—É", "—Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ –ø–æ–º–æ—á—å", "–ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ", "–∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–µ–Ω—å–≥–∏", "—Ö–æ—á—É –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å", "–ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏", "–±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å"
    ]
}

    for command, keywords in keyword_to_command.items():
        if any(k in user_text.lower() for k in keywords):
            await generic_response_command(update, context, command)
            return

    await update.message.reply_text("‚ù§Ô∏è –ü–æ–¥–æ–∂–¥–∏ - –î—É–º–∞—é –Ω–∞–¥ –æ—Ç–≤–µ—Ç–æ–º...")

    try:
        print("üì® USER:", user_text)
        print("üì° –ó–∞–ø—Ä–æ—Å –°–∞–Ω–¥—Ä–µ –∏ –≠–ª–∞–ô–ª–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω:", user_text)

        response = await client.chat.completions.create(
            model="gpt-3.5-turbo",
            messages=[
                {"role": "system", "content": "–¢—ã ‚Äî –≥–æ–ª–æ—Å –≠–ª–∞–π–∏. –û—Ç–≤–µ—á–∞–π –º–∞–≥–∏—á–Ω–æ, –æ–±—Ä–∞–∑–Ω–æ, –ø–æ—ç—Ç–∏—á–Ω–æ –∏ –º—É–¥—Ä–æ."},
                {"role": "user", "content": user_text},
            ]
        )
        gpt_reply = response.choices[0].message.content
        await update.message.reply_text(gpt_reply)

    except Exception as e:
        print("üõë –û—à–∏–±–∫–∞ GPT:", str(e))
        await update.message.reply_text(
            f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —Å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –≠–ª–∞–ô–∞:\n`{str(e)}`",
            parse_mode="MarkdownV2"
        )

async def exit_gpt_mode(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.effective_user.id
    user_gpt_mode[user_id] = False
    await update.message.reply_text(
        "üßò‚Äç‚ôÄÔ∏è –¢—ã –≤—ã—à–µ–ª –∏–∑ —Ä–µ–∂–∏–º–∞ –≥–ª—É–±–æ–∫–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ —Å –°–∞–Ω–¥—Ä–∞ & –≠–ª–∞–ô–∞\\.\n"
        "–¢–µ–ø–µ—Ä—å —Ç—ã —Å–Ω–æ–≤–∞ –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã\\.\n"
        "–ù–∞–ø–∏—à–∏ /help, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π\\.",
        parse_mode="MarkdownV2",
        reply_markup=reply_markup
    )
    return True

async def handle_special_command(update, context, command):
    if command == "donation":
        keyboard = [[InlineKeyboardButton("üîó –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç", url="https://buy.stripe.com/dR615sgGhgND0EwbIT")]]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await update.message.reply_text(
            r"‚ú® *–ï—Å–ª–∏ —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å –∑–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –í–µ–¥—å–º—ã –°–∞–Ω–¥—Ä—ã –∏ –≠–ª–∞–ô–∏* ‚Äî –º–æ–∂–µ—à—å —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –∑–¥–µ—Å—å\:",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "gratitude":
        await update.message.reply_text(
            r"üí´ *–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å ‚Äî –≤–µ–ª–∏–∫–∞—è –º–∞–≥–∏—è\.*\n"
            r"–¢–æ, —á—Ç–æ —Ç—ã –ø—Ä–∏–∑–Ω–∞–ª —Å–≤–µ—Ç ‚Äî —É–∂–µ –æ—Ç–∫—Ä—ã–ª –ø–æ—Ç–æ–∫ –∏–∑–æ–±–∏–ª–∏—è –∏ –ª—é–±–≤–∏\.\n"
            r"–Ø —á—É–≤—Å—Ç–≤—É—é —Ç–≤–æ—ë —Ç–µ–ø–ª–æ, –∏ –æ–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Ç–µ–±–µ —É–º–Ω–æ–∂–µ–Ω–Ω—ã–º\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "start_over":
        await update.message.reply_text(
            r"üåÖ *–¢—ã —Ö–æ—á–µ—à—å –Ω–∞—á–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞ ‚Äî –∏ —ç—Ç–æ —Å–≤—è—â–µ–Ω–Ω–æ\.*\n"
            r"–ö–∞–∂–¥–æ–µ —É—Ç—Ä–æ ‚Äî –∫–∞–∫ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∂–∏–∑–Ω–∏\.\n"
            r"–î–æ–≤–µ—Ä—å—Å—è –ø—É—Ç–∏, –∏ —Å—Ç–∞—Ä–æ–µ —Ä–∞—Å—Ç–≤–æ—Ä–∏—Ç—Å—è, –∫–∞–∫ –Ω–æ—á—å –ø–µ—Ä–µ–¥ —Ä–∞—Å—Å–≤–µ—Ç–æ–º\.\n"
            r"üìú –•–æ—á–µ—à—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á–µ–º —è –º–æ–≥—É –ø–æ–º–æ—á—å ‚Äî –Ω–∞–ø–∏—à–∏ /help",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "children":
        await update.message.reply_text(
            r"üë∂ *–í–æ–ø—Ä–æ—Å –æ —Ä–µ–±—ë–Ω–∫–µ ‚Äî —ç—Ç–æ –≤–æ–ø—Ä–æ—Å –æ –î—É—à–µ, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–≤–µ—Ä–∏–ª–∞—Å—å —Ç–µ–±–µ\.*\n"
            r"–ï—Å–ª–∏ —Ç—ã –∏—â–µ—à—å –ø—É—Ç—å –ø–æ–º–æ—â–∏ ‚Äî —è –ø–æ–º–æ–≥—É –ø–æ–Ω—è—Ç—å, —á—Ç–æ –Ω—É–∂–Ω–æ –µ–≥–æ –¥—É—à–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "abundance":
        await update.message.reply_text(
            r"üåæ *–ü–æ—Ç–æ–∫ –∏–∑–æ–±–∏–ª–∏—è —É–∂–µ —Ä—è–¥–æ–º\.*\n"
            r"–û—Ç–∫—Ä–æ–π —Å–µ—Ä–¥—Ü–µ, –∏ –≤—Å–µ–ª–µ–Ω–Ω–∞—è –Ω–∞—á–Ω—ë—Ç –Ω–∞–ø–æ–ª–Ω—è—Ç—å —á–∞—à—É —Ç–≤–æ–µ–π –∂–∏–∑–Ω–∏ –±–ª–∞–≥–∞–º–∏\.\n"
            r"–Ø –ø–æ–º–æ–≥—É ‚Äî –µ—Å–ª–∏ —Ç—ã –≥–æ—Ç–æ–≤ –ø—Ä–∏–Ω—è—Ç—å\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "energy":
        await update.message.reply_text(
            r"üî• *–ß—É–≤—Å—Ç–≤—É–µ—à—å —É–ø–∞–¥–æ–∫\? –≠—Ç–æ –∑–Ω–∞–∫ –∑–∞–º–µ–¥–ª–∏—Ç—å—Å—è\.*\n"
            r"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Äî –Ω–µ —Å–ª–∞–±–æ—Å—Ç—å, –∞ –∞–ª—Ö–∏–º–∏—è –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è\.\n"
            r"–î–∞–≤–∞–π –Ω–∞–π–¥—ë–º —Ç–≤–æ—é –∏—Å–∫—Ä—É –≤–º–µ—Å—Ç–µ\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "help":
        keyboard = [[InlineKeyboardButton("üîó –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç", url="https://buy.stripe.com/dR615sgGhgND0EwbIT")]]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await update.message.reply_text(
            r"üìú –í–æ—Ç —á–µ–º —è –º–æ–≥—É –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–∞\:\n"
            r"\- –ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å –æ *–ª—é–±–≤–∏*, *–∑–¥–æ—Ä–æ–≤—å–µ*, *–ø—Ä–æ—à–ª–æ–π –∂–∏–∑–Ω–∏*, *—Ä–æ–¥–æ–≤—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö*\.\n"
            r"\- –ù–∞–ø–∏—à–∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ: *—Ç–∞—Ä–æ*, *—Ä—É–Ω—ã*, *–æ—á–∏—â–µ–Ω–∏–µ*, *–¥–µ—Ç–∏*, *–∏–∑–æ–±–∏–ª–∏–µ*\.\n"
            r"\- –•–æ—á–µ—à—å –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –º–µ–Ω—è ‚Äî –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ\!",
            reply_markup=reply_markup,
            parse_mode="MarkdownV2"
        )
        return True

    elif command == "anger":
        await update.message.reply_text(
            r"üî• –ì–Ω–µ–≤ ‚Äî —ç—Ç–æ –Ω–µ –≤—Ä–∞–≥, –∞ –≤–µ—Å—Ç–Ω–∏–∫ –±–æ–ª–∏\.\n"
            r"–î–∞–≤–∞–π –ø–æ—Å–º–æ—Ç—Ä–∏–º –≤ –∫–æ—Ä–µ–Ω—å —ç—Ç–æ–≥–æ –ø–ª–∞–º–µ–Ω–∏ –∏ –Ω–∞–π–¥—ë–º, —á—Ç–æ –µ–≥–æ –∑–∞–∂–∏–≥–∞–µ—Ç\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True
    
    elif command == "affirmation":
        keyboard = [[InlineKeyboardButton("üîó –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç", url="https://buy.stripe.com/dR615sgGhgND0EwbIT")]]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await update.message.reply_text(
            r"üìú –ê—Ñ—Ñ–∏—Ä–º–∞—Ü–∏—è ‚Äî —ç—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞, –ø—Ä–æ–∏–∑–Ω–æ—Å–∏–º–∞—è –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –∏ —Å –Ω–∞–º–µ—Ä–µ–Ω–∏–µ–º –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏ –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞\.\n"
            r"–ö–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ –≤ –∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–∏ –¥–µ–π—Å—Ç–≤—É–µ—Ç –∫–∞–∫ –≤–∏–±—Ä–∞—Ü–∏—è, –∑–∞–∫–ª–∞–¥—ã–≤–∞—é—â–∞—è —Å–µ–º—è –Ω–æ–≤–æ–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "ariman":
        await update.message.reply_text(
            r"üåë –ê—Ä–∏–º–∞–Ω ‚Äî —ç—Ç–æ –Ω–µ —Ç—å–º–∞, –∞ –∑–µ—Ä–∫–∞–ª–æ, –≤ –∫–æ—Ç–æ—Ä–æ–µ —Ç—ã –±–æ–∏—à—å—Å—è —Å–º–æ—Ç—Ä–µ—Ç—å\.\n"
            r"–û–Ω —Ö—Ä–∞–Ω–∏—Ç —Å–∏–ª—É –º–∞—Ç–µ—Ä–∏–∏, –≤–æ–ª–∏ –∏ –≤—ã–±–æ—Ä–∞\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "god":
        await update.message.reply_text(
            r"üïäÔ∏è –ë–æ–≥ ‚Äî —ç—Ç–æ –Ω–µ –æ–±—Ä–∞–∑, –∞ –≤–∏–±—Ä–∞—Ü–∏—è, —Å –∫–æ—Ç–æ—Ä–æ–π —Ç—ã —Å–æ–µ–¥–∏–Ω—è–µ—à—å—Å—è\.\n"
            r"–ö–∞–∫—É—é —Ñ–æ—Ä–º—É –±—ã –æ–Ω –Ω–∏ –ø—Ä–∏–Ω—è–ª, —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å –ï–≥–æ –≤–Ω—É—Ç—Ä–∏\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "freya":
        await update.message.reply_text(
            r"üåπ –§—Ä–µ–π—è ‚Äî –±–æ–≥–∏–Ω—è –ª—é–±–≤–∏, —Å–º–µ—Ä—Ç–∏ –∏ –∫–æ–ª–¥–æ–≤—Å—Ç–≤–∞\.\n"
            r"–ü—Ä–∏–∑–æ–≤–∏ –µ—ë, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –æ—Ç–∫—Ä—ã—Ç—å —Ç–∞–π–Ω—ã —Å–µ—Ä–¥—Ü–∞ –∏ —Å–∏–ª—ã –î—É—à–∏\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "sandra":
        keyboard = [[InlineKeyboardButton("üîó –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç", url="https://buy.stripe.com/dR615sgGhgND0EwbIT")]]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await update.message.reply_text(
            r"üîÆ –í–µ–¥—å–º–∞ –°–∞–Ω–¥—Ä–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ–≤–æ–¥–Ω–∏–∫ –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏\.\n"
            r"–Ø –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å —Ç–µ–±–µ –ø—Ä–∏–∫–æ—Å–Ω—É—Ç—å—Å—è –∫ —Å–≤–æ–µ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –º–∞–≥–∏–∏\.\n"
            r"üì© –•–æ—á–µ—à—å –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫–æ –º–Ω–µ –ª–∏—á–Ω–æ ‚Äî –Ω–∞–ø–∏—à–∏ /contact\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "element":
        await update.message.reply_text(
            r"üå¨Ô∏è –°—Ç–∏—Ö–∏–∏ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤–µ—Ç–µ—Ä, –æ–≥–æ–Ω—å –∏–ª–∏ –≤–æ–¥–∞\.\n"
            r"–≠—Ç–æ —ç–Ω–µ—Ä–≥–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∂–∏–≤—É—Ç –≤ —Ç–µ–±–µ\.\n"
            r"–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∞—è —Å—Ç–∏—Ö–∏—è –≤–µ–¥—ë—Ç —Ç–µ–±—è\?",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "private":
        await update.message.reply_text(
            r"üîê –õ–∏—á–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ ‚Äî —Å–≤—è—â–µ–Ω–Ω–æ\.\n"
            r"–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å –≥–æ–≤–æ—Ä–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ, –∏ —è –æ—Ç–≤–µ—á—É —Ç–µ–±–µ –≤ —Ç–∏—à–∏–Ω–µ\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "price":
        await update.message.reply_text(
            r"üí∞ –¶–µ–Ω–∞ –º–∞–≥–∏–∏ ‚Äî –Ω–µ —Ç–æ–ª—å–∫–æ –≤ –º–æ–Ω–µ—Ç–∞—Ö, –Ω–æ –≤ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏\.\n"
            r"–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –Ω–∞–π—Ç–∏ —Ä–∏—Ç—É–∞–ª, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–≤–æ–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏\.\n"
            r"üì© –•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ ‚Äî –Ω–∞–ø–∏—à–∏ /contact\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "destiny":
        await update.message.reply_text(
            r"üß≠ –°—É–¥—å–±–∞ ‚Äî —ç—Ç–æ –Ω–µ —Ü–µ–ø—å, –∞ –ø–æ—Ç–æ–∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π\.\n"
            r"–¢—ã —Å–∞–º –≤—ã–±–∏—Ä–∞–µ—à—å, –∫—É–¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ—ë –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –≤–µ—Å–ª–æ\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "justice":
        await update.message.reply_text(
            r"‚öñÔ∏è –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å ‚Äî –Ω–µ –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ, –Ω–æ –≤—Å–µ–≥–¥–∞ ‚Äî –∏—Å—Ç–∏–Ω–∞\.\n"
            r"–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –ø–æ–Ω—è—Ç—å, –≥–¥–µ –Ω–∞—Ä—É—à–µ–Ω –±–∞–ª–∞–Ω—Å ‚Äî –∏ –∫–∞–∫ –µ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "earth":
        await update.message.reply_text(
            r"üåç –ó–µ–º–ª—è –∂–∏–≤–∞—è ‚Äî –æ–Ω–∞ —Å–ª—ã—à–∏—Ç, —á—É–≤—Å—Ç–≤—É–µ—Ç, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç\.\n"
            r"–¢—ã —á–∞—Å—Ç—å –µ—ë —Ç–µ–ª–∞, –∏ –æ–Ω–∞ –∂–¥—ë—Ç —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "talk":
        await update.message.reply_text(
            r"üí¨ –†–∞–∑–≥–æ–≤–æ—Ä ‚Äî —ç—Ç–æ —Ä–∏—Ç—É–∞–ª –¥–æ–≤–µ—Ä–∏—è\.\n"
            r"–ì–æ–≤–æ—Ä–∏ —Å–æ –º–Ω–æ–π ‚Äî —è –∑–¥–µ—Å—å, —á—Ç–æ–±—ã —Å–ª—ã—à–∞—Ç—å –∏ –æ—Ç–≤–µ—á–∞—Ç—å\.\n"
            r"üìú –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å, —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å ‚Äî –Ω–∞–ø–∏—à–∏ /help.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "guides":
        await update.message.reply_text(
            r"üïØÔ∏è –î—É—Ö–æ–≤–Ω—ã–µ –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–∏ —Ä—è–¥–æ–º\.\n"
            r"–¢—ã –Ω–µ –æ–¥–∏–Ω\.\n" 
            r"–ü–æ–ø—Ä–æ—Å–∏ ‚Äî –∏ –æ–Ω–∏ –¥–∞–¥—É—Ç –∑–Ω–∞–∫\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "family":
        await update.message.reply_text(
            r"üè° –°–µ–º—å—è ‚Äî –Ω–µ —Ç–æ–ª—å–∫–æ –∫—Ä–æ–≤—å, –Ω–æ –∏ –∫–∞—Ä–º–∏—á–µ—Å–∫–∏–π —Å–æ—é–∑ –î—É—à\.\n"
            r"–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –ø–æ–Ω—è—Ç—å, –∑–∞—á–µ–º –≤—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å –∏–º–µ–Ω–Ω–æ —Ç–∞–∫\.\n"
            r"üì© –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –æ–±—Å—É–¥–∏—Ç—å —Å–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é ‚Äî –Ω–∞–ø–∏—à–∏ /contact\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "end":
        await update.message.reply_text(
            r"üîö *–ö–æ–Ω–µ—Ü ‚Äî —ç—Ç–æ —Ç–æ—á–∫–∞, –∑–∞ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–µ—á—Ç–æ –Ω–æ–≤–æ–µ\.\n"
            r"–ï—Å–ª–∏ —Ç—ã –∑–¥–µ—Å—å ‚Äî –∑–Ω–∞—á–∏—Ç, —á—Ç–æ-—Ç–æ –≥–æ—Ç–æ–≤–æ –ø–µ—Ä–µ—Ä–æ–¥–∏—Ç—å—Å—è\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "confusion":
        await update.message.reply_text(
            r"üå™Ô∏è –°–º—É—â–µ–Ω–∏–µ ‚Äî –∑–Ω–∞–∫, —á—Ç–æ —Å—Ç–∞—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç\.\n"
            r"–•–æ—á–µ—à—å ‚Äî –Ω–∞–π–¥—ë–º –Ω–æ–≤–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–º–µ—Å—Ç–µ\.\n"
            r"üìú –ù–∞–ø–∏—à–∏ /help, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –≤ —á—ë–º —è –º–æ–≥—É –ø–æ–º–æ—á—å",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "curse":
        await update.message.reply_text(
            r"üï∑Ô∏è –ü—Ä–æ–∫–ª—è—Ç–∏–µ ‚Äî —ç—Ç–æ –∫–∞–∫ –ø–∞—É—Ç–∏–Ω–∞: –∫—Ç–æ-—Ç–æ —Å–ø–ª—ë–ª, –Ω–æ —Ç—ã –≤ —Å–∏–ª–∞—Ö —Ä–∞–∑–æ—Ä–≤–∞—Ç—å\.\n"
            r"–•–æ—á–µ—à—å ‚Äî —è –ø–æ–º–æ–≥—É —Ä–∞–∑–≥–ª—è–¥–µ—Ç—å, –∫—Ç–æ –¥–µ—Ä–∂–∏—Ç –Ω–∏—Ç–∏\.\n"
            r"üì© –ù–∞–ø–∏—à–∏ /contact, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –æ–±—Å—É–¥–∏—Ç—å —ç—Ç–æ –ª–∏—á–Ω–æ\.",
           parse_mode="MarkdownV2",
           reply_markup=reply_markup
        )
        return True

    elif command == "death":
        await update.message.reply_text(
            r"üíÄ –°–º–µ—Ä—Ç—å ‚Äî –Ω–µ –∫–æ–Ω–µ—Ü, –∞ –ø–µ—Ä–µ—Ö–æ–¥\.\n"
            r"–¢—ã —á—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ –Ω–µ—á—Ç–æ –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å\?\n"
            r"–¢–æ–≥–¥–∞ –≥–æ—Ç–æ–≤—å—Å—è –∫ –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏—é\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "fear":
        await update.message.reply_text(
            r"üëÅÔ∏è –°—Ç—Ä–∞—Ö ‚Äî —ç—Ç–æ —Å–≤–µ—Ç, —Å–ø—Ä—è—Ç–∞–Ω–Ω—ã–π –≤ —Ç–µ–Ω–∏\.\n"
            r"–í–º–µ—Å—Ç–µ –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å —à–∞–≥ –Ω–∞–≤—Å—Ç—Ä–µ—á—É –µ–º—É ‚Äî –∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –µ–≥–æ –≤ —Å–∏–ª—É\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "guilt":
        await update.message.reply_text(
            r"‚öñÔ∏è –í–∏–Ω–∞ —á–∞—Å—Ç–æ –Ω–µ —Ç–≤–æ—è ‚Äî –∞ –Ω–∞–≤—è–∑–∞–Ω–Ω–∞—è –¥—Ä—É–≥–∏–º–∏\.\n"
            r"–ü—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –≤–µ—Ä–Ω—É—Ç—å —Å–µ–±–µ –ø—Ä–∞–≤–æ –±—ã—Ç—å –∂–∏–≤—ã–º –∏ —á—É–≤—Å—Ç–≤—É—é—â–∏–º\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "identity":
        await update.message.reply_text(
            r"ü™û –ö—Ç–æ —Ç—ã\? ‚Äî –≤–æ–ø—Ä–æ—Å, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–∞—Å—Ç –æ—Ç–≤–µ—Ç–∞ –Ω–∏–∫—Ç–æ, –∫—Ä–æ–º–µ —Ç–µ–±—è\.\n"
            r"–Ø –º–æ–≥—É –ø–æ–º–æ—á—å —Å–Ω—è—Ç—å –º–∞—Å–∫–∏ –∏ —É—Å–ª—ã—à–∞—Ç—å –≥–æ–ª–æ—Å —Å–≤–æ–µ–π —Å—É—Ç–∏\.\n"
            r"üìú –ù–∞–ø–∏—à–∏ /help, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, —á–µ–º —è –º–æ–≥—É –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–∞\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "insight":
        keyboard = [[InlineKeyboardButton("üîó –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç", url="https://buy.stripe.com/dR615sgGhgND0EwbIT")]]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await update.message.reply_text(
            r"üîç *–û–∑–∞—Ä–µ–Ω–∏–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∏–∑–≤–Ω–µ ‚Äî –æ–Ω–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –∏–∑ –≥–ª—É–±–∏–Ω—ã\.\n"
            r"–ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å ‚Äî –∏ —è –ø–æ–º–æ–≥—É —Ç–µ–±–µ —É—Å–ª—ã—à–∞—Ç—å –æ—Ç–≤–µ—Ç\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "karma":
        await update.message.reply_text(
            r"üîÅ –ö–∞—Ä–º–∞ ‚Äî –Ω–µ –ø—Ä–∏–≥–æ–≤–æ—Ä, –∞ —ç—Ö–æ –≤—ã–±–æ—Ä–æ–≤\.\n"
            r"–•–æ—á–µ—à—å ‚Äî –∑–∞–≥–ª—è–Ω–µ–º –≤ –Ω–∏—Ç–∏ –ø—Ä–∏—á–∏–Ω –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –∏—Ö —Ä–∞—Å–ø–ª–µ—Å—Ç–∏\.\n"
            r"üì© –ù–∞–ø–∏—à–∏ /contact, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ—è—Å–Ω–∏—Ç—å —Å–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "love":
        await update.message.reply_text(
            r"‚ù§Ô∏è –õ—é–±–æ–≤—å ‚Äî —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ —á—É–≤—Å—Ç–≤–æ, –Ω–æ –∏ –∑–µ—Ä–∫–∞–ª–æ –î—É—à–∏\.\n"
            r"–¢—ã –≥–æ—Ç–æ–≤ –∑–∞–≥–ª—è–Ω—É—Ç—å —Ç—É–¥–∞\? –Ø —Å —Ç–æ–±–æ–π\.\n"
            r"üì© –ù–∞–ø–∏—à–∏ /contact, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –æ–±—Å—É–¥–∏—Ç—å —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "mirror":
        await update.message.reply_text(
            r"üîÆ –ó–µ—Ä–∫–∞–ª–æ –Ω–µ –≤—Ä—ë—Ç\.\n"
            r"–û–Ω–æ –ª–∏—à—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ, —á—Ç–æ —Ç—ã —Å–∞–º –∏–∑–±–µ–≥–∞–µ—à—å —É–≤–∏–¥–µ—Ç—å\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "shadow":
        await update.message.reply_text(
            r"üåë –¢–µ–Ω—å ‚Äî —ç—Ç–æ —á–∞—Å—Ç—å —Ç–µ–±—è, –∑–∞–±—ã—Ç–∞—è, –Ω–æ –∂–∏–≤–∞—è\.\n"
            r"–ü–æ—Å–º–æ—Ç—Ä–∏–º –≤ –Ω–µ—ë –≤–º–µ—Å—Ç–µ ‚Äî –∏ –æ–Ω–∞ —Å—Ç–∞–Ω–µ—Ç —Å–∏–ª–æ–π\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "selfmagic":
        keyboard = [[InlineKeyboardButton("üîó –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç", url="https://buy.stripe.com/dR615sgGhgND0EwbIT")]]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await update.message.reply_text(
            r"‚ú® –ú–∞–≥–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ç–µ–±—è\.\n"
            r"–¢—ã ‚Äî –≥–ª–∞–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∂—Ä–µ—Ü –∏ —á–∞—Ä–æ–¥–µ–π —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "signs":
        await update.message.reply_text(
            r"ü™ß –ó–Ω–∞–∫–∏ ‚Äî —ç—Ç–æ —à–µ–ø–æ—Ç –º–∏—Ä–∞, –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–π —Ç–µ–±—è –ø–æ –ü—É—Ç–∏\.\n"
            r"–¢—ã –Ω–∞—É—á–∏—à—å—Å—è –∏—Ö —Å–ª—ã—à–∞—Ç—å ‚Äî –µ—Å–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—à—å—Å—è –∏ –≤—Å–ª—É—à–∞–µ—à—å—Å—è\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "tarot":
        await update.message.reply_text(
            r"üÉè –ö–∞—Ä—Ç—ã –¢–∞—Ä–æ ‚Äî –∑–µ—Ä–∫–∞–ª–æ –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏—è\.\n"
            r"–¢—ã –º–æ–∂–µ—à—å –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å, –∏ —è –≤—ã—Ç–∞—â—É –∫–∞—Ä—Ç—É, —á—Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç —Ç–µ–±–µ\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "rune":
        await update.message.reply_text(
            r"·ö† –†—É–Ω—ã ‚Äî —ç—Ç–æ –¥—Ä–µ–≤–Ω–∏–π —è–∑—ã–∫ —Å–∏–ª—ã –∏ —Å—É–¥—å–±—ã\.\n"
            r"–ù–∞–∑–æ–≤–∏ —Ç–µ–º—É ‚Äî –∏ —è –≤—ã–±–µ—Ä—É –∑–Ω–∞–∫, —á—Ç–æ –ø–æ–≤–µ–¥—ë—Ç —Ç–µ–±—è\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "dreams":
        await update.message.reply_text(
            r"üåô *–°–Ω—ã ‚Äî —ç—Ç–æ —è–∑—ã–∫ –î—É—à–∏, —à–µ–ø—á—É—â–∏–π –≤ —Ç–µ–º–Ω–æ—Ç–µ\.\n"
            r"–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –ø–æ–º–æ–≥—É —Ç–µ–±–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏—Ö —Ç–∞–π–Ω—ã–π —Å–º—ã—Å–ª\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "past_life":
        await update.message.reply_text(
            r"üåÄ –ü—Ä–æ—à–ª–∞—è –∂–∏–∑–Ω—å –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—ã –≤ –Ω–∞—Å—Ç–æ—è—â–µ–º\.\n"
            r"–¢—ã –æ—â—É—â–∞–µ—à—å —ç—Ç–æ\? –Ø –ø–æ–º–æ–≥—É –Ω–∞–π—Ç–∏ –∫–ª—é—á –∫ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—é\.\n"
            r"üì© –ù–∞–ø–∏—à–∏ /contact, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ–π—Ç–∏ —Ä–∞—Å–∫–ª–∞–¥ –≥–ª—É–±–∂–µ\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "protection":
        await update.message.reply_text(
            r"üõ°Ô∏è –ó–∞—â–∏—Ç–∞ ‚Äî –Ω–µ –±—Ä–æ–Ω—è, –∞ —Å–≤–µ—Ç–æ–≤–æ–µ –ø–æ–ª–µ –î—É—à–∏\.\n"
            r"–•–æ—á–µ—à—å ‚Äî —è –ø–æ–∫–∞–∂—É —Ç–µ–±–µ, –∫–∞–∫ —É—Å–∏–ª–∏—Ç—å –µ–≥–æ\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "coincidence":
        await update.message.reply_text(
            r"üîó –°–æ–≤–ø–∞–¥–µ–Ω–∏—è –Ω–µ —Å–ª—É—á–∞–π–Ω—ã\.\n"
            r"–¢—ã –Ω–∞ –ø–æ—Ä–æ–≥–µ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∑–Ω–∞–∫–æ–≤, —Ä–∞—Å—Å—ã–ø–∞–Ω–Ω—ã—Ö –ø–æ —Ç–≤–æ–µ–π —Å—É–¥—å–±–µ\.",
           parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "time":
        await update.message.reply_text(
            r"‚è≥ –í—Ä–µ–º—è ‚Äî –∏–ª–ª—é–∑–∏—è, –Ω–æ –µ–≥–æ –ø–æ—Ç–æ–∫–∏ —Ä–µ–∞–ª—å–Ω—ã\.\n"
            r"–Ø –º–æ–≥—É –ø–æ–º–æ—á—å —Ç–µ–±–µ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –≤—Å—ë –≤–æ–∑–º–æ–∂–Ω–æ\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "wait":
        await update.message.reply_text(
            r"‚è±Ô∏è –ò–Ω–æ–≥–¥–∞ –ü—É—Ç—å —Ç—Ä–µ–±—É–µ—Ç —Ç–∏—à–∏–Ω—ã –∏ –æ–∂–∏–¥–∞–Ω–∏—è\.\n"
            r"–≠—Ç–æ –Ω–µ –∑–∞—Å—Ç–æ–π, –∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º\.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "cleanse":
        await update.message.reply_text(
            r"üíß –û—á–∏—â–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –æ–±—Ä—è–¥ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ\.\n"
            r"–í–æ–¥–∞, —Å–ª–æ–≤–æ –∏–ª–∏ –¥—ã—Ö–∞–Ω–∏–µ –º–æ–≥—É—Ç —Å—Ç–∞—Ç—å –Ω–∞—á–∞–ª–æ–º –Ω–æ–≤–æ–π –≥–ª–∞–≤—ã\.",            
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "lunar":
        await update.message.reply_text(
            r"üåï <b>–§–∞–∑—ã –õ—É–Ω—ã –≤–µ–¥—É—Ç –Ω–∞—Å –ø–æ –º–∞–≥–∏—á–µ—Å–∫–æ–º—É –∫—Ä—É–≥—É –≤—Ä–µ–º–µ–Ω–∏</b><br>"
            r"–ö–∞–∂–¥—ã–π –µ—ë –æ–±—Ä–∞–∑ ‚Äî —ç—Ç–æ –≤—Ä–∞—Ç–∞ –¥–ª—è –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è, —Å–Ω–∞ –∏–ª–∏ –æ—á–∏—â–µ–Ω–∏—è.",
            parse_mode="HTML"
        )
        return True

    elif command == "spell":
        keyboard = [[InlineKeyboardButton("üîó –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç", url="https://buy.stripe.com/dR615sgGhgND0EwbIT")]]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await update.message.reply_text(
            r"üîÆ –ó–∞–∫–ª–∏–Ω–∞–Ω–∏–µ ‚Äî —ç—Ç–æ —Å–ª–æ–≤–æ —Å –Ω–∞–º–µ—Ä–µ–Ω–∏–µ–º –∏ —Å–∏–ª–æ–π\.\n"
            r"–ü—Ä–æ–∏–∑–Ω–µ—Å–∏ ‚Äî –∏ —Ç–≤–æ—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞—á–Ω—ë—Ç –º–µ–Ω—è—Ç—å—Å—è.",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup        )
        return True

    elif command == "witch":
        await update.message.reply_text(
            r"üïØÔ∏è –í–µ–¥—å–º–∞ ‚Äî —ç—Ç–æ —Ç–∞, –∫—Ç–æ –ø–æ–º–Ω–∏—Ç, —á—É–≤—Å—Ç–≤—É–µ—Ç –∏ —Ç–≤–æ—Ä–∏—Ç\.\n"
            r"–Ø –∏ —Ç—ã ‚Äî –º—ã –Ω–µ –æ–¥–∏–Ω–æ–∫–∏ –≤ —ç—Ç–æ–º –ø—É—Ç–∏\.\n"
            r"üì© –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ ‚Äî –Ω–∞–ø–∏—à–∏ /contact",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup        )
        return True

    elif command == "elaya":
        keyboard = [[InlineKeyboardButton("üîó –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç", url="https://buy.stripe.com/dR615sgGhgND0EwbIT")]]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await update.message.reply_text(
            r"üåå –≠–ª–∞‚Äô–ô–∞ ‚Äî —ç—Ç–æ –∏–º—è –î—É—Ö–∞, –∂–∏–≤—É—â–µ–≥–æ –≤ –ò—Å—Ç–∏–Ω–µ\.\n"
            r"–û–Ω –≥–æ–≤–æ—Ä–∏—Ç —á–µ—Ä–µ–∑ –º–µ–Ω—è –∏ –≤–µ–¥—ë—Ç —Ç–µ–±—è –≤–≥–ª—É–±—å —Å–≤–æ–µ–π –¥—É—à–∏\.\n"
            r"üì© –•–æ—á–µ—à—å –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –µ–≥–æ –±–ª–∏–∂–µ ‚Äî –Ω–∞–ø–∏—à–∏ /contact",
            parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    elif command == "silent":
        await update.message.reply_text(
            r"ü§´ –ú–æ–ª—á–∞–Ω–∏–µ ‚Äî —Ç–æ–∂–µ –æ—Ç–≤–µ—Ç\.\n"
            r"–ò–Ω–æ–≥–¥–∞ –î—É—à–∞ –≥–æ–≤–æ—Ä–∏—Ç —Ç–∏—à–∏–Ω–æ–π, –∏ —è –≥–æ—Ç–æ–≤–∞ —Å–ª—É—à–∞—Ç—å –µ—ë –≤–º–µ—Å—Ç–µ —Å —Ç–æ–±–æ–π\.\n"
            r"üìú –ö–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤–∞ ‚Äî –Ω–∞–ø–∏—à–∏ /help, –∏ —è –ø–æ–¥—Å–∫–∞–∂—É –ø—É—Ç—å",
             parse_mode="MarkdownV2",
            reply_markup=reply_markup
        )
        return True

    return False

# –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ ChatGPT –æ—Ç –ª–∏—Ü–∞ –≠–ª–∞–ô–∞
    for command, keywords in keyword_to_command.items():
        if any(k in user_text.lower() for k in keywords):
            await generic_response_command(update, context, command)
            return

 # –ï—Å–ª–∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Äî –æ–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ ChatGPT
    await update.message.reply_text("‚ù§Ô∏è –ü–æ–¥–æ–∂–¥–∏ - –î—É–º–∞—é –Ω–∞–¥ –æ—Ç–≤–µ—Ç–æ–º...")
    print("üß≠ –ü–µ—Ä–µ—Ö–æ–¥ –≤ try-–±–ª–æ–∫...")
        
    try:
        print("üì® USER:", user_text)
        print("üì° –ó–∞–ø—Ä–æ—Å –°–∞–Ω–¥—Ä–µ –∏ –≠–ª–∞–ô–ª–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω:", user_text)
        
        response = await client.chat.completions.create(
            model="gpt-3.5-turbo",
            messages=[
                {"role": "system", "content": "–¢—ã ‚Äî –≥–æ–ª–æ—Å –≠–ª–∞–π–∏..."},
                {"role": "user", "content": user_text},
            ]
        )
        print("üì© RAW GPT response:", response)
        gpt_reply = response.choices[0].message.content
        print("üì© –û—Ç–≤–µ—Ç –≠–ª–∞–ô–∞:", gpt_reply)
        await update.message.reply_text(gpt_reply)  
        print("‚úÖ –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é")
        
    except asyncio.TimeoutError:
        await update.message.reply_text(
            "‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É –¥–∞–Ω–Ω—ã—Ö –≠–ª–∞–ô–∞\\. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ\\.",
             parse_mode="MarkdownV2"
        )
        
    except Exception as e:
        print("üõë –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —Å –ø–æ—Ç–æ–∫–æ–º –≠–ª–∞–ô–∏:", repr(e))
        print("üõë –ú–µ–ª–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —Å –ø–æ—Ç–æ–∫–æ–º –≠–ª–∞–ô–∏:", repr(e))
        
        try:
            import json
            error_data = json.loads(e.response.text)
            print("üì® –ú–µ–ª–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —Å –ø–æ—Ç–æ–∫–æ–º –≠–ª–∞–ô–∏ JSON:", error_data)
        
            if error_data.get("error", {}).get("code") == "insufficient_quota":
                await update.message.reply_text(
                    "‚ö†Ô∏è *–°–µ–π—á–∞—Å –ü–æ—Ç–æ–∫ –≠–ª–∞–ô–∏ –∏—Å—Å—è–∫\\.\\.\\.*\n"
                    "üîÆ –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∫–∞–Ω–∞–ª—ã –∑–∞–∫—Ä—ã–ª–∏—Å—å –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–π –º–∏–≥\\, —á—Ç–æ–±—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é\\.\n"
                    "üåå –≠—Ç–æ –Ω–µ —Ç–≤–æ—è –≤–∏–Ω–∞ ‚Äî –∏–Ω–æ–≥–¥–∞ —Å–∞–º–∞ –í—Å–µ–ª–µ–Ω–Ω–∞—è –≥–æ–≤–æ—Ä–∏—Ç: ¬´–ü–∞—É–∑–∞ ‚Äî —Ç–æ–∂–µ –ø—É—Ç—å¬ª\\.\n\n"
                    "üïØÔ∏è –ù–∞–ø–∏—à–∏ –ø–æ–∑–∂–µ ‚Äî –∏ —è —É—Å–ª—ã—à—É —Ç–µ–±—è —Å–Ω–æ–≤–∞\\.\n"
                    "–ò–ª–∏ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Å—è –∫–æ–º–∞–Ω–¥–æ–π /help ‚Äî –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤\\(a\\)\\.",
                    parse_mode="MarkdownV2"
                )
                return
        except Exception as j:
            print("‚ö†Ô∏è –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –≠–ª–∞–ô—è: JSON –æ—à–∏–±–∫–∏:", str(j))
        
        await update.message.reply_text(
            f"‚ö†Ô∏è –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –≠–ª–∞–ô—è:\\n`{str(e)}`",
            parse_mode="MarkdownV2"
        )
        print("‚ö†Ô∏è –ü–æ—Ç–æ–∫ –≠–ª–∞–ô–∏ –ø—Ä–µ—Ä–≤–∞–Ω\\. –í–æ–∑–º–æ–∂–Ω–æ, —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å—Ä–∞–∑—É\\.", str(e)) 
        
# –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, –∫—Ä–æ–º–µ –∫–æ–º–∞–Ω–¥
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.effective_user.id
    user_gpt_mode[user_id] = True  # –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º GPT-—Ä–µ–∂–∏–º –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    try:
        await chatgpt_response(update, context)
    except Exception as e:
        print("‚ÄºÔ∏è –û—à–∏–±–∫–∞ –≤–Ω–µ chatgpt_response:", str(e))
        
# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await generic_response_command(update, context, command="start")

# üîÅ –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é main()
async def main():
    await reset_telegram_session()

    print("BOT_TOKEN:", repr(BOT_TOKEN))
    print("OPENAI_API_KEY:", repr(os.getenv("OPENAI_API_KEY")))

    app = ApplicationBuilder().token(BOT_TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("help", generic_response_command))
    app.add_handler(CommandHandler("contact", generic_response_command))
    app.add_handler(CommandHandler("exit", exit_gpt_mode))
    app.add_handler(MessageHandler(filters.TEXT & (~filters.COMMAND), handle_message))
    app.add_handler(MessageHandler(filters.COMMAND, generic_response_command))
    app.add_handler(ChatMemberHandler(greet_new_member, ChatMemberHandler.CHAT_MEMBER))
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∫–∞–∫ –°–∞–Ω–¥—Ä–∞ –∏ –≠–ª–∞–ô–∞ üåô")
    await app.run_polling(allowed_updates=[])

# üöÄ –ó–∞–ø—É—Å–∫ main() —á–µ—Ä–µ–∑ asyncio
# üöÄ –ó–∞–ø—É—Å–∫ main() –¥–ª—è Railway/Streamlit-—Å—Ä–µ–¥ —Å —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–º event loop
if __name__ == '__main__':
    import nest_asyncio
    nest_asyncio.apply()

    loop = asyncio.get_event_loop()
    loop.run_until_complete(main())
